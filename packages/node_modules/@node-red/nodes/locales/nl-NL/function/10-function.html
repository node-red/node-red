<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="function">
    <p>Een JavaScript-functie die wordt uitgevoerd op de berichten die door de node worden ontvangen.</p>
    <p>De berichten worden doorgegeven als een JavaScript-object genaamd <code>msg</code>.</p>
    <p>Volgens conventie heeft het een <code>msg.payload</code>-eigenschap die
       de inhoud van het bericht bevat.</p>
    <p>De functie wordt verwacht een berichtobject (of meerdere berichtobjecten) te retourneren, maar kan ervoor kiezen
       niets te retourneren om een flow te stoppen.</p>
    <p>Het <b>Bij start</b>-tabblad bevat code die wordt uitgevoerd wanneer de node wordt gestart.
        Het <b>Bij stoppen</b>-tabblad bevat code die wordt uitgevoerd wanneer de node wordt gestopt.</p>
    <p>Als de Bij start-code een Promise-object retourneert, begint de node pas met het verwerken van berichten
        nadat de promise is opgelost.</p>
    <h3>Details</h3>
    <p>Zie de <a target="_blank" href="https://nodered.org/docs/writing-functions.html">online documentatie</a>
    voor meer informatie over het schrijven van functies.</p>
    <h4>Berichten verzenden</h4>
    <p>De functie kan de berichten retourneren die het wil doorgeven aan de volgende nodes
    in de flow, of kan <code>node.send(messages)</code> aanroepen.</p>
    <p>Het kan retourneren/verzenden:</p>
    <ul>
      <li>een enkel berichtobject - doorgegeven aan nodes verbonden met de eerste uitvoer</li>
      <li>een array van berichtobjecten - doorgegeven aan nodes verbonden met de overeenkomstige uitvoeren</li>
    </ul>
    <p>Let op: De setup-code wordt uitgevoerd tijdens de initialisatie van nodes. Als <code>node.send</code> in het setup-tabblad wordt aangeroepen, kunnen volgende nodes het bericht mogelijk niet ontvangen.</p>
    <p>Als een element van de array zelf een array van berichten is, worden meerdere
          berichten naar de overeenkomstige uitvoer verzonden.</p>
    <p>Als null wordt geretourneerd, op zichzelf of als element van de array, wordt er geen
          bericht doorgegeven.</p>
    <h4>Loggen en foutafhandeling</h4>
    <p>Om informatie te loggen of een fout te rapporteren zijn de volgende functies beschikbaar:</p>
      <ul>
          <li><code>node.log("Logbericht")</code></li>
          <li><code>node.warn("Waarschuwing")</code></li>
          <li><code>node.error("Fout")</code></li>
      </ul>
    </p>
    <p>De Catch-node kan ook worden gebruikt om fouten af te handelen. Om een Catch-node aan te roepen,
    geef <code>msg</code> door als tweede argument aan <code>node.error</code>:</p>
    <pre>node.error("Fout",msg);</pre>
    <h4>Toegang tot node-informatie</h4>
    <p>De volgende eigenschappen zijn beschikbaar om informatie over de node te verkrijgen:</p>
    <ul>
        <li><code>node.id</code> - ID van de node</li>
        <li><code>node.name</code> - naam van de node</li>
        <li><code>node.outputCount</code> - aantal node-uitvoeren</li>
    </ul>
    <h4>Omgevingsvariabelen gebruiken</h4>
    <p>Omgevingsvariabelen kunnen worden benaderd met <code>env.get("MY_ENV_VAR")</code>.</p>
</script>
