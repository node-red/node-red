<!--
  Copyright JS Foundation and other contributors, http://js.foundation

  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<script type="text/html" data-help-name="http request">
    <p>Verzendt HTTP-verzoeken en retourneert het antwoord.</p>

    <h3>Invoer</h3>
    <dl class="message-properties">
        <dt class="optional">url <span class="property-type">string</span></dt>
        <dd>Indien niet geconfigureerd in de node, stelt deze optionele eigenschap de url van het verzoek in.</dd>
        <dt class="optional">method <span class="property-type">string</span></dt>
        <dd>Indien niet geconfigureerd in de node, stelt deze optionele eigenschap de HTTP-methode van het verzoek in.
            Moet een van <code>GET</code>, <code>PUT</code>, <code>POST</code>, <code>PATCH</code> of <code>DELETE</code> zijn.</dd>
        <dt class="optional">headers <span class="property-type">object</span></dt>
        <dd>Stelt de HTTP-headers van het verzoek in. LET OP: Eventuele headers die in de nodeconfiguratie zijn ingesteld, overschrijven overeenkomende headers in <code>msg.headers</code></dd>
        <dt class="optional">cookies <span class="property-type">object</span></dt>
        <dd>Indien ingesteld, kan dit worden gebruikt om cookies met het verzoek mee te sturen.</dd>
        <dt class="optional">payload</dt>
        <dd>Verzonden als de body van het verzoek.</dd>
        <dt class="optional">rejectUnauthorized</dt>
        <dd>Indien ingesteld op <code>false</code>, staat dit verzoeken toe naar https-sites die
            zelfondertekende certificaten gebruiken.</dd>
        <dt class="optional">followRedirects</dt>
        <dd>Indien ingesteld op <code>false</code>, voorkomt dit het volgen van Redirect (HTTP 301). <code>true</code> standaard</dd>
        <dt class="optional">requestTimeout</dt>
        <dd>Indien ingesteld op een positief aantal milliseconden, overschrijft dit de globaal ingestelde <code>httpRequestTimeout</code> parameter.</dd>
    </dl>
    <h3>Uitvoer</h3>
    <dl class="message-properties">
        <dt>payload <span class="property-type">string | object | buffer</span></dt>
        <dd>De body van het antwoord. De node kan worden geconfigureerd om de body
             als een string te retourneren, proberen deze als een JSON-string te parsen of als een
             binaire buffer te laten.</dd>
        <dt>statusCode <span class="property-type">number</span></dt>
        <dd>De statuscode van het antwoord, of de foutcode als het verzoek niet kon worden voltooid.</dd>
        <dt>headers <span class="property-type">object</span></dt>
        <dd>Een object met de antwoordheaders.</dd>
        <dt>responseUrl <span class="property-type">string</span></dt>
        <dd>In het geval dat er omleidingen plaatsvonden tijdens de verwerking van het verzoek, is dit de uiteindelijke omgeleide url.
            Anders de url van het oorspronkelijke verzoek.</dd>
        <dt>responseCookies <span class="property-type">object</span></dt>
        <dd>Als het antwoord cookies bevat, is deze eigenschap een object van naam/waarde-paren voor elke cookie.</dd>
        <dt>redirectList <span class="property-type">array</span></dt>
        <dd>Als het verzoek een of meer keer werd omgeleid, wordt de verzamelde informatie toegevoegd aan deze eigenschap. `location` is de volgende omleidingsbestemming. `cookies` zijn de cookies die door de omleidingsbron zijn geretourneerd.</dd>
    </dl>
    <h3>Details</h3>
    <p>Wanneer geconfigureerd in de node, kan de URL-eigenschap <a href="http://mustache.github.io/mustache.5.html" target="_blank">mustache-achtige</a> tags bevatten. Deze maken het
    mogelijk de url te construeren met waarden van het inkomende bericht. Bijvoorbeeld, als de url is ingesteld op
    <code>example.com/{{{topic}}}</code>, wordt de waarde van <code>msg.topic</code> automatisch ingevoegd.
    Door {{{...}}} te gebruiken, voorkomt men dat mustache tekens zoals / & etc. escapet.</p>
    <p>De node kan optioneel automatisch <code>msg.payload</code> coderen als querystring-parameters voor een GET-verzoek, in welk geval <code>msg.payload</code> een object moet zijn.</p>
    <p><b>Let op</b>: Als je achter een proxy draait, moet de standaard <code>http_proxy=...</code> omgevingsvariabele zijn ingesteld en Node-RED opnieuw worden gestart, of gebruik de Proxy-configuratie. Als Proxy-configuratie is ingesteld, heeft de configuratie voorrang op de omgevingsvariabele.</p>
    <h4>Meerdere HTTP Request nodes gebruiken</h4>
    <p>Om meer dan een van deze nodes in dezelfde flow te gebruiken, moet voorzichtig worden omgegaan met
    de <code>msg.headers</code> eigenschap. De eerste node zal deze eigenschap instellen met
    de antwoordheaders. De volgende node zal die headers dan gebruiken voor zijn verzoek - dit
    is meestal niet het juiste gedrag. Als de <code>msg.headers</code> eigenschap ongewijzigd blijft
    tussen nodes, wordt deze door de tweede node genegeerd. Om aangepaste headers in te stellen, moet <code>msg.headers</code>
    eerst worden verwijderd of gereset naar een leeg object: <code>{}</code>.
    <h4>Cookie-afhandeling</h4>
    <p>De <code>cookies</code> eigenschap die aan de node wordt doorgegeven, moet een object van naam/waarde-paren zijn.
    De waarde kan een string zijn om de waarde van de cookie in te stellen of het kan een
    object zijn met een enkele <code>value</code> eigenschap.</p>
    <p>Eventuele cookies die door het verzoek worden geretourneerd, worden teruggegeven onder de <code>responseCookies</code> eigenschap.</p>
    <h4>Content-type afhandeling</h4>
    <p>Als <code>msg.payload</code> een Object is, zal de node automatisch het content-type
    van het verzoek instellen op <code>application/json</code> en de body als zodanig coderen.</p>
    <p>Om het verzoek als formuliergegevens te coderen, moet <code>msg.headers["content-type"]</code> worden ingesteld op <code>application/x-www-form-urlencoded</code>.</p>
    <h4>Bestand uploaden</h4>
    <p>Om een bestand te uploaden, moet <code>msg.headers["content-type"]</code> worden ingesteld op <code>multipart/form-data</code>
        en de <code>msg.payload</code> die aan de node wordt doorgegeven moet een object zijn met de volgende structuur:</p>
    <pre><code>{
    "KEY": {
        "value": FILE_CONTENTS,
        "options": {
            "filename": "FILENAME"
        }
    }
}</code></pre>
    <p>De waarden van <code>KEY</code>, <code>FILE_CONTENTS</code> en <code>FILENAME</code>
    moeten worden ingesteld op de juiste waarden.</p>

</script>
